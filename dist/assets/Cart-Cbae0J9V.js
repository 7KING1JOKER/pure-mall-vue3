import{P as e,_ as a}from"./PcMenu-BXBuAyN1.js";/* empty css                        *//* empty css                    *//* empty css                 */import{useCartStore as t}from"./cart-BxiY-_3G.js";import{u as s}from"./index-BvqL1sXf.js";import{y as l,aA as i,j as o,z as c,Q as n,B as d,u as r,I as m,P as u,a5 as p,O as v,A as f,M as y}from"./vue-vendor-DGIvoex4.js";import{H as C,m as _,c as g,q as k,g as h,M as j,X as x,Y as I,Z as q,_ as V,E as A}from"./element-plus-0hPO9ffS.js";import{C as S}from"./CardSteps-BRP5Pa1b.js";import"./axios-DZIQhO2a.js";import"./utils-DcEdpf46.js";const U={class:"cart-container"},b={class:"cart-content"},w={key:0,class:"empty-cart"},z={key:1},F={class:"cart-items"},M={class:"item-checkbox"},P={class:"item-image"},Q={class:"item-info"},T={class:"item-title"},W={class:"item-spec"},B={class:"item-price"},E={class:"item-quantity"},H={class:"item-subtotal"},L={class:"item-actions"},O={class:"cart-footer"},X={class:"footer-left"},Y={class:"footer-right"},Z={class:"summary"},D={class:"total-quantity"},G={class:"total-amount"},J={class:"amount"},K={class:"actions"},N=a(l({__name:"Cart",setup(a){const l=t(),N=s(),{cartItems:R,selectedCount:$,totalQuantity:ee,totalAmount:ae,selectAll:te}=i(l),{setSelected:se,setSelectAll:le,removeCartItem:ie,removeSelected:oe,updateQuantity:ce,clearCart:ne,goShopping:de,setActiveStep:re,checkout:me}=l;return o(()=>{re(0),N.isLoggedIn&&l.loadCartItems(N.username)}),(a,t)=>{const s=g,l=C,i=_,o=h,re=j,ue=k;return f(),c("div",U,[n(e),n(S),d("div",b,[0===r(R).length?(f(),c("div",w,[n(l,{description:"您的购物车是空的","image-size":300,style:{"margin-top":"100px"}},{default:m(()=>[n(s,{type:"primary",onClick:r(de)},{default:m(()=>t[0]||(t[0]=[y("去购物",-1)])),_:1,__:[0]},8,["onClick"])]),_:1})])):(f(),c("div",z,[d("div",F,[(f(!0),c(u,null,p(r(R),e=>(f(),c("div",{class:"cart-item",key:e.productId},[d("div",M,[n(i,{modelValue:e.selected,"onUpdate:modelValue":a=>e.selected=a,onChange:a=>r(se)(e.id||0)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),d("div",P,[n(o,{src:e.imageUrl,fit:"cover",class:"product-img","preview-src-list":[e.imageUrl],"hide-on-click-modal":"",loading:"lazy",alt:e.name},null,8,["src","preview-src-list","alt"])]),d("div",Q,[d("div",T,v(e.name),1),d("div",W,"规格："+v(e.spec),1)]),d("div",B,"¥"+v(e.price?.toFixed(2)),1),d("div",E,[n(re,{modelValue:e.quantity,"onUpdate:modelValue":a=>e.quantity=a,min:1,max:10,size:"small",onChange:a=>r(ce)(e.id||0,e.quantity)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),d("div",H,"¥"+v(e.price&&e.quantity?(e.price*e.quantity).toFixed(2):"0.00"),1),d("div",L,[n(s,{type:"danger",circle:"",plain:"",onClick:a=>r(ie)(e.id||0)},{default:m(()=>[n(ue,null,{default:m(()=>[n(r(x))]),_:1})]),_:2},1032,["onClick"]),n(s,{type:"info",circle:"",plain:"",onClick:a=>(async e=>{try{await N.addToWishlistItem(N.username,e.productId),N.addToWishlist(e)}catch(a){A.error("添加到收藏夹失败，请重试")}})(e)},{default:m(()=>[n(ue,null,{default:m(()=>[n(r(I))]),_:1})]),_:2},1032,["onClick"])])]))),128))]),d("div",O,[d("div",X,[n(i,{checked:r(te),onChange:r(le)},{default:m(()=>t[1]||(t[1]=[y("全选",-1)])),_:1,__:[1]},8,["checked","onChange"]),n(s,{type:"text",onClick:r(oe),disabled:0===r($)},{default:m(()=>[n(ue,null,{default:m(()=>[n(r(x))]),_:1}),y(" 删除("+v(r($))+") ",1)]),_:1},8,["onClick","disabled"]),n(s,{type:"text",onClick:r(ne)},{default:m(()=>[n(ue,null,{default:m(()=>[n(r(q))]),_:1}),t[2]||(t[2]=y(" 清空购物车 ",-1))]),_:1,__:[2]},8,["onClick"])]),d("div",Y,[d("div",Z,[d("div",D," 共 "+v(r(ee))+" 件商品 ",1),d("div",G,[t[3]||(t[3]=d("span",null,"总计：",-1)),d("span",J,"¥"+v(r(ae).toFixed(2)),1)]),d("div",K,[n(ue,{onClick:r(me),class:"checkout-icon"},{default:m(()=>[n(r(V))]),_:1},8,["onClick"])])])])])]))])])}}}),[["__scopeId","data-v-617c8973"]]);export{N as default};
