import{aA as e,r as a,w as l,H as s,A as t,I as o,Q as i,B as d,M as r,z as n,u,O as c,E as m,K as p,P as f,a5 as v,aC as h,L as b}from"./vue-vendor-DGIvoex4.js";import{k as _,l as y,f as g,s as k,t as w,u as V,c as x,j as C,w as D,v as A,e as I,y as j,q as U,ab as T,a7 as B,$ as P,Y as E,x as z,A as M,B as S,a1 as Y,C as N,D as O,ac as F,X as H,F as L,ad as W,G as $,ae as q,H as G,af as K,E as Q,b as X}from"./element-plus-0hPO9ffS.js";import{_ as J,P as R}from"./PcMenu-BXBuAyN1.js";/* empty css                  */import{u as Z,a as ee}from"./index-BvqL1sXf.js";import{A as ae}from"./AddressDialog-KOvnSrSL.js";import{P as le}from"./ProductCard-BJzeAHU2.js";import"./utils-DcEdpf46.js";import"./axios-DZIQhO2a.js";/* empty css                    *//* empty css                        */const se={class:"dialog-footer"},te=J({__name:"EditProfileDialog",props:{modelValue:Boolean},emits:["update:modelValue"],setup(n,{emit:u}){const c=n,m=u,p=Z(),{basicInfo:f}=e(p);function v(e){const a={};return e.forEach(e=>{"用户名"===e.label&&(a.username=e.value),"邮箱"===e.label&&(a.email=e.value),"手机"===e.label&&(a.phone=e.value),"性别"===e.label&&(a.sex=e.value),"生日"===e.label&&(a.birthday=e.value)}),a}const h=a(v(f.value));function b(){m("update:modelValue",!1)}function D(){const e=[{label:"用户名",value:h.value.username},{label:"邮箱",value:h.value.email},{label:"手机",value:h.value.phone},{label:"性别",value:h.value.sex},{label:"生日",value:h.value.birthday}];p.basicInfo=e,p.updateUserInfo(p.username,h.value),b()}return l(()=>c.modelValue,e=>{e&&(h.value=v(f.value))}),(e,a)=>{const l=g,u=y,c=w,m=k,p=V,f=_,v=x,A=C;return t(),s(A,{"model-value":n.modelValue,"onUpdate:modelValue":b,title:"修改资料",class:"edit-profile-dialog"},{footer:o(()=>[d("div",se,[i(v,{onClick:b,class:"btn-cancel"},{default:o(()=>a[5]||(a[5]=[r("取消",-1)])),_:1,__:[5]}),i(v,{type:"primary",onClick:D,class:"btn-save"},{default:o(()=>a[6]||(a[6]=[r("保存",-1)])),_:1,__:[6]})])]),default:o(()=>[i(f,{model:h.value,class:"edit-form","label-width":"80px","label-position":"right"},{default:o(()=>[i(u,{label:"用户名",class:"form-item"},{default:o(()=>[i(l,{modelValue:h.value.username,"onUpdate:modelValue":a[0]||(a[0]=e=>h.value.username=e),class:"input-style",placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),i(u,{label:"邮箱",class:"form-item"},{default:o(()=>[i(l,{modelValue:h.value.email,"onUpdate:modelValue":a[1]||(a[1]=e=>h.value.email=e),class:"input-style",placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),i(u,{label:"手机",class:"form-item"},{default:o(()=>[i(l,{modelValue:h.value.phone,"onUpdate:modelValue":a[2]||(a[2]=e=>h.value.phone=e),class:"input-style",placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),i(u,{label:"性别",class:"form-item"},{default:o(()=>[i(m,{modelValue:h.value.sex,"onUpdate:modelValue":a[3]||(a[3]=e=>h.value.sex=e),placeholder:"请选择",class:"input-style"},{default:o(()=>[i(c,{label:"男",value:"男"}),i(c,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),i(u,{label:"生日",class:"form-item"},{default:o(()=>[i(p,{modelValue:h.value.birthday,"onUpdate:modelValue":a[4]||(a[4]=e=>h.value.birthday=e),"value-format":"YYYY-MM-DD",type:"date",placeholder:"选择日期",class:"input-style"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["model-value"])}}},[["__scopeId","data-v-8d4140fd"]]),oe={class:"main-container"},ie={class:"sidebar"},de={class:"user-profile-header"},re={class:"user-info"},ne={class:"user-name"},ue={class:"user-email"},ce={class:"content-header"},me={class:"content-title"},pe={key:0,class:"profile-section"},fe={key:1,class:"orders-section",style:{"margin-top":"20px"}},ve={key:2,class:"address-section",style:{"margin-top":"20px"}},he={class:"address-header"},be={class:"address-name"},_e={class:"address-detail"},ye={key:3,class:"wishlist-section",style:{"margin-top":"20px"}},ge={key:0,class:"empty-wishlist"},ke={key:1,class:"wishlist-container"},we={class:"wishlist-item-wrapper"},Ve=J({__name:"User",setup(a){const l=Z(),_=ee(),y=h(),{vip:g,activeTab:k,tabIcons:w,tabTitles:V,basicInfo:C,memberInfo:J,addresses:se}=e(l),{wishlistItems:Ve,handleMenuSelect:xe}=l,Ce=()=>{l.openAddAddressDialog()};return(e,a)=>(t(),n(f,null,[i(R),d("div",oe,[d("div",ie,[i(u(I),{class:"user-profile-card"},{header:o(()=>[d("div",de,[i(u(A),{size:80,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}),d("div",re,[d("div",ne,c(u(l).username),1),d("div",ue,c(u(l).email),1)])])]),default:o(()=>[i(u(D),{type:"primary",effect:"plain",color:"transparent",style:{color:"#333"}},{default:o(()=>[r(c(u(g)),1)]),_:1})]),_:1}),i(u(z),{"default-active":u(k),class:"nav-menu",onSelect:u(xe)},{default:o(()=>[i(u(j),{index:"profile"},{default:o(()=>[i(u(U),null,{default:o(()=>[i(u(T))]),_:1}),d("span",{class:m({"through-line":"profile"===u(k)})},"个人资料",2)]),_:1}),i(u(j),{index:"orders"},{default:o(()=>[i(u(U),null,{default:o(()=>[i(u(B))]),_:1}),d("span",{class:m({"through-line":"orders"===u(k)})},"我的订单",2)]),_:1}),i(u(j),{index:"address"},{default:o(()=>[i(u(U),null,{default:o(()=>[i(u(P))]),_:1}),d("span",{class:m({"through-line":"address"===u(k)})},"地址管理",2)]),_:1}),i(u(j),{index:"wishlist"},{default:o(()=>[i(u(U),null,{default:o(()=>[i(u(E))]),_:1}),d("span",{class:m({"through-line":"wishlist"===u(k)})},"我的收藏",2)]),_:1})]),_:1},8,["default-active","onSelect"])]),i(u(I),{class:"content-card"},{header:o(()=>[d("div",ce,[d("div",me,[i(u(U),null,{default:o(()=>{return[(t(),s(b((e=u(w)[u(k)],{User:T,ShoppingCart:B,Location:P,Star:E}[e]||T))))];var e}),_:1}),d("span",null,c(u(V)[u(k)]),1)])])]),default:o(()=>["profile"===u(k)?(t(),n("div",pe,[i(u(M),{title:"基本信息",column:2,border:!0},{default:o(()=>[(t(!0),n(f,null,v(u(C),(e,a)=>(t(),s(u(S),{key:a,label:e.label,"label-class-name":"profile-label","class-name":"profile-content"},{default:o(()=>[r(c(e.value),1)]),_:2},1032,["label"]))),128))]),_:1}),i(u(U),{onClick:a[0]||(a[0]=e=>u(l).EditProfileDialogVisible=!0),style:{"margin-top":"20px"},class:"edit-icon"},{default:o(()=>[i(u(Y))]),_:1})])):p("",!0),"orders"===u(k)?(t(),n("div",fe,[i(u(N),{data:u(l).orders,style:{"max-width":"100%",width:"auto"},border:!0,"header-row-style":{background:"transparent"}},{default:o(()=>[i(u(O),{prop:"orderNumber",label:"订单号",width:"180"}),i(u(O),{prop:"createTime",label:"下单时间",width:"180"}),i(u(O),{prop:"orderAmount",label:"订单金额",width:"120"}),i(u(O),{label:"状态",width:"120"},{default:o(e=>[i(u(D),{type:u(l).statusType(e.row.status),effect:"dark"},{default:o(()=>[r(c(e.row.status),1)]),_:2},1032,["type"])]),_:1}),i(u(O),{label:"操作",width:"160"},{default:o(e=>[i(u(U),{onClick:a=>{var l;(l=e.row.orderNumber)?y.push({name:"OrderDetail",params:{orderNumber:l}}):Q.error("无法获取订单信息")},size:"30px"},{default:o(()=>[i(u(F))]),_:2},1032,["onClick"]),i(u(U),{onClick:a=>{return s=e.row.orderNumber,void X.confirm("确定要删除这个订单吗？此操作不可恢复。","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await _.deleteOrder(s),await _.deleteOrderItems(l.userId,s)}).catch(()=>{});var s},size:"30px"},{default:o(()=>[i(u(H))]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])):p("",!0),"address"===u(k)?(t(),n("div",ve,[i(u(L),{gutter:20},{default:o(()=>[(t(!0),n(f,null,v(u(se),(e,n)=>(t(),s(u($),{span:12,key:n},{default:o(()=>[i(u(I),{class:"address-card",shadow:"hover"},{header:o(()=>[d("div",he,[d("span",be,c(e.name),1),e.isDefault?(t(),s(u(D),{key:0,type:"success",size:"small"},{default:o(()=>a[4]||(a[4]=[r("默认地址",-1)])),_:1,__:[4]})):p("",!0)])]),footer:o(()=>[i(u(x),{type:"primary",icon:u(Y),text:"",onClick:a=>{return s=e.id,void l.openEditAddressDialog(s);var s}},null,8,["icon","onClick"]),i(u(x),{type:"danger",icon:u(H),text:"",onClick:a=>{return s=e.id,void X.confirm("确定要删除这个地址吗？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{l.deleteAddress(l.username,s)}).catch(()=>{Q.info("删除操作已取消")});var s}},null,8,["icon","onClick"]),e.isDefault?p("",!0):(t(),s(u(x),{key:0,type:"success",icon:u(W),text:"",onClick:a=>{return s=e.id,void l.setDefaultAddress(l.username,s);var s},style:{color:"#333"}},{default:o(()=>a[5]||(a[5]=[r("Default",-1)])),_:2,__:[5]},1032,["icon","onClick"]))]),default:o(()=>[d("div",_e,[d("p",null,c(e.province)+" "+c(e.city)+" "+c(e.district),1),d("p",null,c(e.street),1),d("p",null,"邮编："+c(e.postcode),1),d("p",null,"电话："+c(e.phone),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),i(u(U),{onClick:Ce,class:"add-icon"},{default:o(()=>[i(u(q))]),_:1})])):p("",!0),"wishlist"===u(k)?(t(),n("div",ye,[0===u(Ve).length?(t(),n("div",ge,[i(u(G),{description:"暂无收藏内容","image-size":200},{default:o(()=>[i(u(x),{type:"primary",onClick:a[1]||(a[1]=e=>u(y).push("/category"))},{default:o(()=>a[6]||(a[6]=[r("开始收藏",-1)])),_:1,__:[6]})]),_:1})])):(t(),n("div",ke,[(t(!0),n(f,null,v(u(Ve),e=>(t(),n("div",{key:e.id,class:"wishlist-item-list"},[d("div",we,[i(le,{product:e},null,8,["product"]),i(u(U),{class:"delete-wishlist-btn",onClick:a=>(e=>{X.confirm(`确定要从收藏夹移除「${e.name}」吗？`,"移除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{l.removeWishlistItem(l.username,e.id),l.removeFromWishlist(e.id)}).catch(()=>{})})(e)},{default:o(()=>[i(u(K))]),_:2},1032,["onClick"])])]))),128))]))])):p("",!0)]),_:1}),i(te,{modelValue:u(l).EditProfileDialogVisible,"onUpdate:modelValue":a[2]||(a[2]=e=>u(l).EditProfileDialogVisible=e)},null,8,["modelValue"]),i(ae,{modelValue:u(l).AddressDialogVisible,"onUpdate:modelValue":a[3]||(a[3]=e=>u(l).AddressDialogVisible=e)},null,8,["modelValue"])])],64))}},[["__scopeId","data-v-2558043e"]]);export{Ve as default};
