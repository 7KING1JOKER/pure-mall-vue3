import{p as e,_ as t,P as i}from"./PcMenu-BsCkS281.js";/* empty css                           *//* empty css                         *//* empty css                        */import{ay as s,aA as a,r as d,z as l,A as c,Q as r,I as o,B as n,O as u,K as p,u as m,P as g,a5 as h,E as v,y as z,c as f,aB as b,j as S,w as y,H as k,M as D,W as _,D as V}from"./vue-vendor-CX6JgQha.js";import{r as x,u as C}from"./index-BRCmbdoR.js";import{useCartStore as L}from"./cart-BZ7cES-1.js";import{Q as F,j as M,h as j,N as I,q as P,a as w,E as X,g as $,i as T,O as q,U as E,V as U,W as A}from"./element-plus-ChN3TaTZ.js";import{F as G}from"./Footer-DY4MUz_L.js";import"./axios-DZIQhO2a.js";import"./utils-DcEdpf46.js";const H=(()=>{const t=[];return e.forEach((e,i)=>{Math.floor(e.id/1e3);let s="",a={};e.id>=1001&&e.id<=1020?(s="优质面料，舒适透气，时尚百搭",a={"材质":"优质面料","版型":"时尚版型","颜色":"多色可选","尺码":"S/M/L/XL/XXL","适用季节":"四季通用"}):e.id>=1021&&e.id<=1032?(s="舒适面料，修身版型，活动自如",a={"材质":"优质面料","版型":"修身版型","颜色":"多色可选","尺码":"S/M/L/XL/XXL","适用场景":"日常休闲"}):e.id>=1033&&e.id<=1036?(s="舒适鞋底，透气鞋面，走路轻盈",a={"材质":"优质鞋面材质","鞋底":"舒适防滑鞋底","颜色":"多色可选","尺码":"35-44","适用场景":"日常出行"}):e.id>=1037&&e.id<=1040?(s="时尚设计，优质材质，精致做工",a={"材质":"优质材质","风格":"时尚风格","颜色":"多色可选","尺寸":"均码/多尺寸可选","适用场景":"日常搭配"}):e.id>=1041&&e.id<=1044?(s="亲肤面料，舒适透气，贴身不紧绷",a={"材质":"亲肤面料","版型":"舒适版型","颜色":"多色可选","尺码":"S/M/L/XL","洗涤说明":"建议手洗或机洗轻柔模式"}):e.id>=1045&&e.id<=1048&&(s="优质材质，大容量设计，耐磨耐用",a={"材质":"优质材质","容量":"大容量","颜色":"多色可选","内部结构":"多层设计","适用场景":"日常/旅行"}),s="PURE致力于革新衣橱中的经典单品，而这款T恤便是品牌设计思路的体现。这款T恤在宽松的剪裁比例中，延续休闲的圆领设计，并注入细腻的针织肌理，构筑不凡的简约质感。\n\n- 休闲版型\n- 圆领设计\n- 短袖款式\n- 罗纹收边\n\n100%棉。不含配饰/可机洗\n\n尺码M码的后衣长为64厘米";const d={id:e.id,name:e.name,brief:s,price:e.price,originalPrice:Math.round(1.3*e.price),sales:e.sales,images:[e.image,e.image,e.image],specs:[{id:1,name:"白色",price:e.price,stock:100},{id:2,name:"黑色",price:e.price,stock:80},{id:3,name:"灰色",price:e.price,stock:60}],detail:"100% 棉 / 中温熨烫,不可干洗,需要时只可用非氯性漂白剂,平放晾干,温和机洗（最高温度30℃） 款号: 1263697001",params:Object.entries(a).map(([e,t])=>({name:e,value:t})),reviews:[{id:2*i+1,user:"顾客"+String.fromCharCode(65+i%26),avatar:`https://api.dicebear.com/7.x/personas/svg?seed=user${e.id}`,rating:5,content:"质量很好，穿着舒适，非常满意！",date:`2023-10-${Math.floor(25*Math.random())+1}`},{id:2*i+2,user:"顾客"+String.fromCharCode(75+i%26),avatar:`https://api.dicebear.com/7.x/personas/svg?seed=user${e.id+1}`,rating:4,content:"整体不错，性价比高，推荐购买。",date:`2023-10-${Math.floor(25*Math.random())+1}`}]};t.push(d)}),t})(),Q=s("product",{state:()=>({product:null,selectedSpec:null,selectedColor:"白色",selectedSize:"",quantity:1,relatedProducts:[],currentImageIndex:0,activeTab:"detail",productDatabase:H,productDetailsDialogVisible:!1,productSizeDialogVisible:!1,isGuiderExpanded:!1,productSizeList:[{id:1,size:"S",detail:"175/92A"},{id:2,size:"M",detail:"178/95A"},{id:3,size:"L",detail:"181/98A"},{id:4,size:"XL",detail:"184/101A"}],defaultProduct:{id:0,name:"精品",brief:"高品质，舒适透气，时尚百搭",price:99,sales:500,images:["https://via.placeholder.com/300x300?text=图片1","https://via.placeholder.com/300x300?text=图片2","https://via.placeholder.com/300x300?text=图片3"],image:"https://via.placeholder.com/300x300?text=暂无图片",specs:[{id:1,name:"白色",price:99,stock:100},{id:2,name:"黑色",price:99,stock:80},{id:3,name:"灰色",price:99,stock:60}],detail:'<div style="padding: 20px;"><h2>产品详情</h2><p>本款采用优质面料制作，舒适透气，时尚百搭，适合各种场合穿着。</p><h3>产品特点</h3><ul><li>优质面料，舒适亲肤</li><li>时尚设计，百搭款式</li><li>精致做工，耐洗耐穿</li><li>多色可选，满足不同需求</li></ul></div>',params:[{name:"材质",value:"优质面料"},{name:"版型",value:"时尚版型"},{name:"颜色",value:"白色/黑色/灰色"},{name:"尺码",value:"S/M/L/XL/XXL"},{name:"适用季节",value:"四季通用"}],reviews:[{id:1,user:"顾客甲",avatar:"https://api.dicebear.com/7.x/personas/svg?seed=user",rating:5,content:"质量很好，穿着舒适，非常满意！",date:"2023-10-15"},{id:2,user:"顾客乙",avatar:"https://api.dicebear.com/7.x/personas/svg?seed=user",rating:4,content:"整体不错，性价比高，推荐购买。",date:"2023-10-10"}]}}),getters:{currentSpecStock:e=>{if(!e.product||null===e.selectedSpec)return 0;const t=e.product?.specs?.find(t=>t.id===e.selectedSpec);return t?t.stock:0}},actions:{async loadProductDetail(e){try{const t=await x.get(`/product/${e}`);t&&"object"==typeof t&&(200===t.code?this.product=t.data:this.product=this.defaultProduct)}catch(t){}this.product?.specs&&this.product.specs.length>0&&(this.selectedSpec=this.product.specs[0].id),!this.product||!this.product.image||this.product.images&&0!==this.product.images.length||(this.product.images=[this.product.image,this.product.image,this.product.image]),this.product&&!this.product.specs&&(this.product.specs=[{id:1,name:"白色",price:99,stock:100},{id:2,name:"黑色",price:99,stock:80},{id:3,name:"灰色",price:99,stock:60}],this.selectedSpec=this.product.specs[0].id),this.product&&!this.product?.detail&&(this.product.detail="100% 棉 / 中温熨烫,不可干洗,需要时只可用非氯性漂白剂,平放晾干,温和机洗（最高温度30℃） 款号: 1263697001"),this.product&&(this.product.brief=`PURE致力于革新衣橱中的经典单品，而这款${this.product.name}便是品牌设计思路的体现。这款${this.product.name}在宽松的剪裁比例中，延续休闲的圆领设计，并注入细腻的针织肌理，构筑不凡的简约质感。\n\n- 休闲版型\n- 圆领设计\n- 短袖款式\n- 罗纹收边\n\n100%棉。不含配饰/可机洗\n\n尺码M码的后衣长为64厘米`)},toggleGuider(){this.isGuiderExpanded=!this.isGuiderExpanded},setSelectedSpec(e){if(this.selectedSpec=e,this.product&&this.product.specs){const t=this.product.specs.find(t=>t.id===e);this.selectedColor=t?t.name:"白色"}},setSelectedSize(e){this.selectedSize=e},setQuantity(e){this.quantity=e},increaseQuantity(){this.quantity+=1},decreaseQuantity(){this.quantity>1&&(this.quantity-=1)},setCurrentImageIndex(e){this.currentImageIndex=e},setActiveTab(e){this.activeTab=e},getColorValue:e=>({"黑色":"#000000","白色":"#FFFFFF","灰色":"#808080","红色":"#FF0000","蓝色":"#0000FF","绿色":"#00FF00","黄色":"#FFFF00","紫色":"#800080"}[e]||"#808080")}}),W={class:"product-details-dialog"},N={class:"product-description"},O={class:"size-guider-icon"},B={key:0,class:"size-guider-content"},R=["innerHTML"],Y={class:"product-details"},K={class:"size-guider-icon"},J={key:0,class:"size-guider-content"},Z=["innerHTML"],ee=t({__name:"ProductDetailsDialog",setup(e){const t=Q(),{productDetailsDialogVisible:i,product:s}=a(t),g=d(!1),h=d(!1),v=()=>{h.value=!h.value},z=()=>{g.value=!g.value},f=e=>{let t=e.replace(/\n/g,"<br>");return t=t.replace(/(<br>)-/g,"<br>-"),t};return(e,i)=>{const a=F,d=M;return c(),l("div",W,[r(d,{title:m(s)?.name||"商品详情",modelValue:m(t).productDetailsDialogVisible,"onUpdate:modelValue":i[0]||(i[0]=e=>m(t).productDetailsDialogVisible=e),top:"0",width:"25%",transition:"fade","open-delay":.3},{default:o(()=>[n("div",N,[n("div",{class:"size-guider-header",onClick:v},[i[1]||(i[1]=n("span",{class:"size-guider-title"},"描述",-1)),n("span",O,u(h.value?"-":"+"),1)]),r(a,null,{default:o(()=>[h.value?(c(),l("div",B,[n("div",{innerHTML:f(m(s)?.brief||"暂无描述"),class:"product-font-content"},null,8,R)])):p("",!0)]),_:1})]),n("div",Y,[n("div",{class:"size-guider-header",onClick:z},[i[2]||(i[2]=n("span",{class:"size-guider-title"},"细节",-1)),n("span",K,u(g.value?"-":"+"),1)]),r(a,null,{default:o(()=>[g.value?(c(),l("div",J,[n("div",{innerHTML:m(s)?.detail||"暂无描述",class:"product-font-content"},null,8,Z)])):p("",!0)]),_:1})])]),_:1},8,["title","modelValue"])])}}},[["__scopeId","data-v-b7eda4eb"]]),te={class:"product-size-dialog"},ie={class:"size-squres"},se=["onClick"],ae={class:"size-guider"},de={class:"size-guider-icon"},le={key:0,class:"size-guider-content"},ce=t({__name:"ProductSizeDialog",setup(e){const t=Q(),{isGuiderExpanded:i}=a(t),s=()=>{t.toggleGuider()},d=e=>{const i=`${e.detail} (${e.size})`;return t.selectedSize===i};return(e,a)=>{const z=F,f=M;return c(),l("div",te,[r(f,{title:"尺码选择",modelValue:m(t).productSizeDialogVisible,"onUpdate:modelValue":a[0]||(a[0]=e=>m(t).productSizeDialogVisible=e),top:"0",width:"25%",transition:"fade","open-delay":.3},{default:o(()=>[n("div",ie,[(c(!0),l(g,null,h(m(t).productSizeList,e=>(c(),l("div",{class:v(["size-square",{selected:d(e)}]),onClick:i=>(e=>{const i=`${e.detail} (${e.size})`;t.setSelectedSize(i)})(e)},[n("h1",null,u(e.detail),1),n("h1",null,"("+u(e.size)+")",1)],10,se))),256))]),n("div",ae,[n("div",{class:"size-guider-header",onClick:s},[a[1]||(a[1]=n("span",{class:"size-guider-title"},"尺码规格说明",-1)),n("span",de,u(m(i)?"-":"+"),1)]),r(z,null,{default:o(()=>[m(i)?(c(),l("div",le,a[2]||(a[2]=[n("img",{src:"/assets/product-size-guider-D1XgPYYX.png",alt:"尺码说明图",class:"size-guider-image"},null,-1)]))):p("",!0)]),_:1})])]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-8808e27b"]]),re={class:"product-detail-container"},oe={key:0,class:"product-detail-main"},ne={class:"product-gallery"},ue={class:"product-info"},pe={class:"product-breadcrumb"},me={class:"product-content"},ge={class:"product-title"},he={class:"product-price"},ve={class:"color-select"},ze={class:"color-text"},fe={class:"color-options"},be=["onClick"],Se={class:"product-desc"},ye={class:"product-actions"},ke={class:"action-button add-to-wish-wrapper"},De={class:"action-button add-to-cart-wrapper"},_e={class:"product-gallery-zoom"},Ve=t(z({__name:"ProductDetail",setup(e){const t=b(),s=f(()=>Number(t.params.id)),d=Q(),z=L(),x=C(),{product:F,selectedSpec:M}=a(d),H=f(()=>{if(!F.value)return{id:"",name:""};const e=s.value;let t="",i="";return e>=1001&&e<=1020?(t="1",i="上衣"):e>=1021&&e<=1032?(t="2",i="下装"):e>=1033&&e<=1036?(t="3",i="鞋子"):e>=1037&&e<=1040?(t="4",i="配饰"):e>=1041&&e<=1044?(t="5",i="内衣"):e>=1045&&e<=1048&&(t="6",i="箱包"),{id:t,name:i}}),{loadProductDetail:W,setSelectedSpec:N,getColorValue:O}=d;return S(()=>{W(s.value)}),y(s,()=>{W(s.value)}),(e,t)=>{const a=$,f=T,b=j,S=q,y=I,C=P;return c(),l("div",re,[r(i),m(F)?(c(),l("div",oe,[n("div",ne,[r(b,{interval:4e3,direction:"vertical",class:"productDetail-carousel"},{default:o(()=>[(c(!0),l(g,null,h(m(F).images,(e,t)=>(c(),k(f,{key:t},{default:o(()=>[r(a,{src:e,fit:"cover",class:"gallery-image",loading:"lazy",alt:m(F).name},null,8,["src","alt"])]),_:2},1024))),128))]),_:1})]),n("div",ue,[n("div",pe,[r(y,{separator:"/",class:"breadcrumb"},{default:o(()=>[r(S,{to:{path:"/category"}},{default:o(()=>t[8]||(t[8]=[D("全部",-1)])),_:1,__:[8]}),H.value.name?(c(),k(S,{key:0,to:{path:"/category"},onClick:t[0]||(t[0]=_(()=>{},["prevent"]))},{default:o(()=>[D(u(H.value.name),1)]),_:1})):p("",!0),r(S,{to:{path:`/product/${s.value}`},replace:!1},{default:o(()=>[D(u(m(F).name),1)]),_:1},8,["to"])]),_:1}),r(C,{onClick:t[1]||(t[1]=t=>e.$router.push("/category")),class:"breadcrumb-icon"},{default:o(()=>[r(m(E))]),_:1})]),n("div",me,[n("h1",ge,u(m(F).name),1),n("h2",he,"¥ "+u(m(F).price.toFixed(2)),1)]),n("div",ve,[n("div",ze,u(m(M)&&m(F).specs?m(F).specs.find(e=>e.id===m(M))?.name:"请选择颜色"),1),n("div",fe,[(c(!0),l(g,null,h(m(F).specs,e=>(c(),l("div",{key:e.id,class:v(["color-option",{selected:m(M)===e.id}]),onClick:t=>m(N)(e.id)},[n("div",{class:"color-circle",style:V({backgroundColor:m(O)(e.name)})},null,4)],10,be))),128))])]),n("div",Se,[n("h2",{class:"desc-item product-desc-content",onClick:t[2]||(t[2]=e=>m(Q)().productDetailsDialogVisible=!0)},"细节 & 描述"),n("h2",{class:"desc-item product-desc-size",onClick:t[3]||(t[3]=e=>m(Q)().productSizeDialogVisible=!0)},"尺码 & 选择"),n("div",ye,[n("div",ke,[r(C,{class:"add-to-wish",onClick:t[4]||(t[4]=e=>{return t=m(F),void(x.isLoggedIn?(x.addToWishlistItem(x.username,t.id),x.addToWishlist(t)):w({title:"请先登录",message:"您需要登录后才能添加商品到收藏夹",type:"warning",duration:2e3}));var t})},{default:o(()=>[r(m(U))]),_:1}),t[9]||(t[9]=n("span",{class:"action-text"},"收藏",-1))]),n("div",De,[r(C,{class:"add-to-cart",onClick:t[5]||(t[5]=e=>{return t=m(F),void(x.isLoggedIn?""!==d.selectedSize?(z.addToCart({productId:t.id,userId:Number(x.userId),name:t.name,price:t.price,quantity:1,imageUrl:t.images[0],spec:d.selectedColor+" "+d.selectedSize,description:t.description,selected:!0}),d.setSelectedSize("")):X.warning("请先选择尺码"):w({title:"请先登录",message:"您需要登录后才能添加商品到购物车",type:"warning",duration:2e3}));var t})},{default:o(()=>[r(m(A))]),_:1}),t[10]||(t[10]=n("span",{class:"action-text"},"购物车",-1))])])]),t[11]||(t[11]=n("h1",{class:"zoom-title"},"缩放图",-1)),n("div",_e,[(c(!0),l(g,null,h(m(F).images,(e,t)=>(c(),l("div",{key:t,class:"product-gallery-item"},[r(a,{src:e,fit:"contain",class:"zoom-image",loading:"lazy",alt:m(F).name},null,8,["src","alt"])]))),128))])])])):p("",!0),r(G),r(ee,{modelValue:m(Q)().productDetailsDialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>m(Q)().productDetailsDialogVisible=e)},null,8,["modelValue"]),r(ce,{modelValue:m(Q)().productSizeDialogVisible,"onUpdate:modelValue":t[7]||(t[7]=e=>m(Q)().productSizeDialogVisible=e)},null,8,["modelValue"])])}}}),[["__scopeId","data-v-6352b29c"]]);export{Ve as default};
